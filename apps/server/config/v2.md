
Quiero diseñar un servicio de generación automática de documentación técnica para proyectos de software.

Contexto general:
- El servicio recibirá:
  1) Un directorio ya sanitizado con el código fuente completo del proyecto.
  2) El árbol completo del proyecto (estructura de carpetas y archivos) ya generado previamente.
- El modelo LLM se ejecutará localmente mediante vLLM, usando una API compatible con OpenAI.
- El acceso a los archivos debe realizarse mediante MCP (Model Context Protocol), usando el MCP oficial de filesystem.
- La orquestación del modelo y las herramientas debe hacerse en Node.js, utilizando un framework moderno (por ejemplo LangChain).
- El servicio debe ser autónomo y usar tool-calling para leer archivos bajo demanda.

Objetivo funcional del sistema:

FASE 1 — Planificación de la documentación

Entrada para el modelo:
- Árbol completo del proyecto (estructura de archivos).
- Instrucción de generar una estructura de documentación.

El modelo debe:
- Analizar el árbol del proyecto.
- Detectar módulos principales, dominios, capas, servicios y componentes relevantes.
- Proponer una estructura de documentación compuesta por:
  - Título general del documento.
  - Secciones principales.
  - Descripción breve de cada sección.
  - Lista de archivos clave por sección (extraídos del árbol recibido).

Durante esta fase NO es obligatorio leer archivos aún, salvo que el modelo lo considere necesario.

Salida esperada (JSON estructurado):

{
  "title": "...",
  "sections": [
    {
      "name": "...",
      "description": "...",
      "key_files": ["src/main.rs", "src/lib.rs"]
    }
  ]
}

FASE 2 — Generación de documentación por sección

Para cada sección definida en Fase 1:
- El modelo debe:
  - Leer únicamente los archivos clave asociados usando MCP filesystem.
  - Analizar su contenido.
  - Generar documentación técnica clara y estructurada en Markdown.
  - Explicar:
      - Responsabilidades
      - Arquitectura
      - Flujo de ejecución
      - Relaciones entre componentes
      - Decisiones de diseño detectadas

El modelo puede hacer múltiples llamadas a:
- read_file
- stat
- otras tools MCP disponibles

Salida esperada:
Un documento Markdown por sección.

Requisitos técnicos adicionales:

- El árbol inicial reduce la necesidad de explorar el filesystem.
- El modelo debe usar tool-calling de forma iterativa.
- El sistema debe evitar cargar el proyecto completo en contexto.
- Debe manejar proyectos grandes.
- Debe permitir agregar más fases en el futuro (ej: resumen ejecutivo, diagramas, análisis de dependencias).

Arquitectura:

Rust (trigger opcional)
        ↓
Node.js Agent (LangChain + MCP filesystem)
        ↓
vLLM (OpenAI-compatible API)
        ↓
Filesystem MCP
        ↓
Directorio del proyecto

El sistema debe ser extensible para:
- Nuevos MCPs (Git, HTTP, DB)
- Nuevas fases de generación
- Diferentes modelos LLM
